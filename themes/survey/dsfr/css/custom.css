/**
 * CSS personnalisé pour le thème DSFR
 *
 * Ce fichier contient les styles personnalisés qui complètent
 * le DSFR pour des besoins spécifiques de LimeSurvey.
 */

/* ============================================
   LAYOUT FIXES
   ============================================ */

/* Ajustements pour le layout global */
body {
    display: flex;
    flex-direction: column;
    min-height: 100vh;
}

body > article {
    flex: 1;
}

/* ============================================
   COMPATIBILITÉ LIMESURVEY
   ============================================ */

/* Assurer que les classes Bootstrap ne cassent pas le DSFR */
.container-fluid {
    max-width: 100%;
}

/* Navigation responsive */
.fr-text-right {
    text-align: right;
}

@media (max-width: 768px) {
    .fr-text-right {
        text-align: center;
        margin-top: 1rem;
    }

    /* Navigation mobile en colonne */
    .fr-grid-row--center .fr-col-sm-6 {
        text-align: center !important;
    }
}

/* ============================================
   STEPPER DSFR - Fallback visuel
   ============================================ */

/* Affichage de la barre de progression du stepper */
.fr-stepper__steps {
    height: 0.25rem;
    background-color: #E5E5E5;
    position: relative;
    margin: 1rem 0;
    border-radius: 0.125rem;
    overflow: hidden;
}

.fr-stepper__steps::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    height: 100%;
    background-color: #000091;
    transition: width 0.3s ease;
}

/* Calcul de la largeur basé sur les data attributes */
.fr-stepper__steps[data-fr-current-step="1"][data-fr-steps="1"]::after { width: 100%; }
.fr-stepper__steps[data-fr-current-step="1"][data-fr-steps="2"]::after { width: 50%; }
.fr-stepper__steps[data-fr-current-step="2"][data-fr-steps="2"]::after { width: 100%; }
.fr-stepper__steps[data-fr-current-step="1"][data-fr-steps="3"]::after { width: 33.33%; }
.fr-stepper__steps[data-fr-current-step="2"][data-fr-steps="3"]::after { width: 66.66%; }
.fr-stepper__steps[data-fr-current-step="3"][data-fr-steps="3"]::after { width: 100%; }
.fr-stepper__steps[data-fr-current-step="1"][data-fr-steps="4"]::after { width: 25%; }
.fr-stepper__steps[data-fr-current-step="2"][data-fr-steps="4"]::after { width: 50%; }
.fr-stepper__steps[data-fr-current-step="3"][data-fr-steps="4"]::after { width: 75%; }
.fr-stepper__steps[data-fr-current-step="4"][data-fr-steps="4"]::after { width: 100%; }
.fr-stepper__steps[data-fr-current-step="1"][data-fr-steps="5"]::after { width: 20%; }
.fr-stepper__steps[data-fr-current-step="2"][data-fr-steps="5"]::after { width: 40%; }
.fr-stepper__steps[data-fr-current-step="3"][data-fr-steps="5"]::after { width: 60%; }
.fr-stepper__steps[data-fr-current-step="4"][data-fr-steps="5"]::after { width: 80%; }
.fr-stepper__steps[data-fr-current-step="5"][data-fr-steps="5"]::after { width: 100%; }

/* ============================================
   TABLEAUX / ARRAYS
   ============================================ */

/* Fix pour les tableaux Array - empêcher form-control de casser le layout */
.fr-table .form-control,
table.fr-table input.form-control,
table.table input.form-control,
table.table-bordered input.form-control {
    width: 100% !important;
    max-width: 100% !important;
    display: inline-block !important;
    box-sizing: border-box !important;
}

/* Les inputs dans les tableaux doivent rester dans leurs cellules */
.fr-table td,
table.table td,
table.table-bordered td {
    vertical-align: middle;
    padding: 0.5rem;
}

.fr-table td input,
.fr-table td textarea,
table.table td input,
table.table td textarea {
    min-width: 0;
    width: 100%;
    margin: 0;
}

/* Empêcher les inputs de déborder des cellules */
table td input.form-control {
    max-width: 100% !important;
}

/* Responsive tables - scroll horizontal sur petit écran */
.fr-table--responsive {
    overflow-x: auto;
    -webkit-overflow-scrolling: touch;
}

@media (max-width: 768px) {
    .fr-table--responsive {
        display: block;
        width: 100%;
    }

    .fr-table--responsive table {
        min-width: 600px; /* Force largeur min pour tableaux */
    }
}

/* ============================================
   COMPOSANTS LIMESURVEY SPÉCIFIQUES
   ============================================ */

/* Convertir form-control en fr-input dans les questions simples */
input.form-control:not(.fr-table input),
textarea.form-control:not(.fr-table textarea),
select.form-control:not(.fr-table select) {
    /* Hérite des styles fr-input si pas déjà appliqué */
    font-family: "Marianne", Arial, sans-serif;
    line-height: 1.5;
}

/* ============================================
   CHECKBOX/RADIO BOOTSTRAP (form-check)
   ============================================ */

/* Les checkbox/radio avec classe form-check-input doivent être visibles */
input.form-check-input[type="checkbox"],
input.form-check-input[type="radio"] {
    position: static !important;
    opacity: 1 !important;
    width: 1.25rem !important;
    height: 1.25rem !important;
    margin: 0 !important;
    display: inline-block !important;
    vertical-align: middle;
}

/* Container form-check doit être en flex pour aligner input + label */
.form-check,
.checkbox-item.form-check,
.radio-item.form-check {
    display: flex !important;
    align-items: center;
    gap: 0.5rem;
}

.form-check-label {
    margin: 0;
    cursor: pointer;
}

/* ============================================
   BOUTONS RADIO STYLÉS (btn-check + btn)
   ============================================ */

/* Yes/No, Gender - Forcer affichage des vrais radios */
/* Désactiver le système btn-check Bootstrap */

.yesno-button input[type="radio"],
.gender-button input[type="radio"] {
    position: static !important;
    opacity: 1 !important;
    width: auto !important;
    height: auto !important;
    margin-right: 0.5rem;
}

/* Cacher les labels "boutons" Bootstrap et utiliser des labels normaux */
.yesno-button .btn,
.gender-button .btn {
    all: unset;
    display: inline;
    cursor: pointer;
    font-family: "Marianne", Arial, sans-serif;
    padding: 0;
}

/* Layout simple pour Yes/No et Gender */
.yesno-button,
.gender-button {
    display: flex;
    gap: 2rem;
    flex-wrap: wrap;
}

.yesno-button .answer-item,
.gender-button .answer-item {
    display: flex;
    align-items: center;
    margin-bottom: 0;
}

/* ============================================
   ICÔNES SUR RADIOS/CHECKBOX
   ============================================ */

/* Support icônes dans labels DSFR (Remix Icon utility classes) */
.fr-label span[class^="ri-"],
.fr-label span[class*=" ri-"],
.fr-label .fa,
.fr-label .ls-icon {
    margin-right: 0.5rem;
    display: inline-block;
    vertical-align: middle;
}
