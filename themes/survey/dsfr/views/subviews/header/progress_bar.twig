{#
    LimeSurvey - DSFR Theme
    Progress Bar / Stepper DSFR

    This file generates the DSFR stepper component showing survey progress.
    @see: https://www.systeme-de-design.gouv.fr/composants-et-modeles/composants/indicateur-d-etapes/
#}
{% if aSurveyInfo.showprogress == 'Y' and aSurveyInfo.format != 'A' and not aSurveyInfo.aCompleted %}
    <!-- DSFR Stepper -->
    <div class="fr-container fr-my-4w">
        {% set progressValue = aSurveyInfo.progress.value %}
        {% set currentStep = aSurveyInfo.gid ? aSurveyInfo.gid : 1 %}
        {% set totalSteps = aSurveyInfo.totalsteps ? aSurveyInfo.totalsteps : 100 %}

        <div class="fr-stepper">
            <h2 class="fr-stepper__title">
                <span class="visually-hidden">{{ sprintf(gT('You have completed %s%% of this survey'), progressValue) }}</span>
                <span aria-hidden="true">
                    {% if aSurveyInfo.groupname %}
                        {{ aSurveyInfo.groupname }}
                    {% else %}
                        {{ sprintf(gT('Step %s of %s'), currentStep, totalSteps) }}
                    {% endif %}
                </span>
            </h2>
            <div class="fr-stepper__steps"
                 data-fr-current-step="{{ currentStep }}"
                 data-fr-steps="{{ totalSteps }}"
                 aria-hidden="true">
            </div>
            <p class="fr-stepper__details">
                <span class="fr-text--bold">{{ progressValue }}%</span> {{ gT("completed") }}
            </p>
        </div>
    </div>
{% endif %}
